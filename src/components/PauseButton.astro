---
interface Props {
  locale: any;
}

const { locale } = Astro.props;
---

<button
  id="pause-btn"
  class="relative group px-8 py-6 rounded-full bg-black dark:bg-white text-white dark:text-black font-medium text-lg shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600 active:scale-95"
  aria-label={locale.ui.fallbackMessage}
>
  <span class="relative z-10">{locale.ui.buttonText}</span>
  <!-- Button hover effect -->
  <span class="absolute inset-0 rounded-full bg-gray-800 dark:bg-gray-200 opacity-0 group-hover:opacity-20 transition-opacity"></span>
</button>

<!-- Suggestion Modal -->
<div
  id="suggestion-modal"
  class="fixed inset-0 bg-black/70 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 opacity-0 pointer-events-none transition-opacity duration-300"
>
  <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-md mx-4 shadow-2xl transform scale-95 transition-transform duration-300">
    <p id="suggestion-text" class="text-center text-gray-800 dark:text-gray-200 text-xl leading-relaxed"></p>
  </div>
</div>

<script define:vars={{ suggestions: locale.suggestions }}>
  const btn = document.getElementById('pause-btn');
  const modal = document.getElementById('suggestion-modal');
  const textEl = document.getElementById('suggestion-text');

  if (btn && modal && textEl) {
    const modalContent = modal.querySelector('div');
    
    btn.addEventListener('click', () => {
      const random = suggestions[Math.floor(Math.random() * suggestions.length)];
      textEl.textContent = random;
      
      
      // Dispatch custom event to update hero text
      const event = new CustomEvent('suggestion-updated', {
        detail: { suggestion: random }
      });
      document.dispatchEvent(event);
      
      // Show modal
      modal.classList.remove('opacity-0', 'pointer-events-none');
      if (modalContent) {
        modalContent.classList.remove('scale-95');
        modalContent.classList.add('scale-100');
      }

      // Hide modal after 3 seconds
      setTimeout(() => {
        modal.classList.add('opacity-0', 'pointer-events-none');
        if (modalContent) {
          modalContent.classList.remove('scale-100');
          modalContent.classList.add('scale-95');
        }
      }, 3000);
    });
  }
</script>
